<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering Course Scheduler</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
    <div class="container">
        <div id="header-controls">
            <div id="selection-display-area">
                <h2>Course Scheduler</h2>
                <p id="selection-display"><i>Initializing... Please make selection in popup.</i></p>
                <div id="userInfo" style="margin-top: 10px; font-size: 1.1em; color: #2c3e50;">
                    Logged in as: <span id="usernameDisplay"></span>
                </div>
            </div>

            <div id="loading-indicator" style="display: none;">
                <div class="spinner"></div>
                <span>Loading Courses...</span>
            </div>

            <div id="main-action-buttons">
                <button onclick="generateBestSchedule()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 5v14M5 12h14"></path>
                    </svg>
                    Add Suggested Courses
                </button>
                <button onclick="togglePopup()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                    Search & Add Courses
                </button>
                <button onclick="resetSchedule()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"></path>
                    </svg>
                    Reset Schedule
                </button>
                <button id="loginBtn" onclick="window.location.href='login.html'">
                    Login/Signup
                </button>
                <button id="registerBtn" onclick="registerCourses()">
                    Register Courses
                </button>
            </div>
        </div>

        <div class="calendar-header">
    <div class="calendar-title">Weekly Schedule</div>
    <div class="calendar-actions">
        <div class="filter-container">
            <select id="filter-department" onchange="applyFilters()">
                <option value="">All Departments</option>
                <option value="BEN">BEN - Biomedical</option>
                <option value="CSE">CSE - Computer Science</option>
                <option value="MAE">MAE - Mechanical</option>
                <option value="CEN">CEN - Chemical</option>
                <option value="CEE">CEE - Civil</option>
                <option value="ELE">ELE - Electrical</option>
                <option value="MAT">MAT - Mathematics</option>
                <option value="PHY">PHY - Physics</option>
                <option value="CHE">CHE - Chemistry</option>
                <option value="ECS">ECS - Engineering</option>
            </select>
            <select id="filter-time" onchange="applyFilters()">
                <option value="">All Times</option>
                <option value="morning">Morning (8AM-12PM)</option>
                <option value="afternoon">Afternoon (12PM-5PM)</option>
                <option value="evening">Evening (5PM+)</option>
            </select>
        </div>
        <div class="action-buttons">
            <button onclick="exportSchedule('pdf')" class="secondary-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                Export
            </button>
            <button onclick="toggleView()" class="secondary-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                    <line x1="3" y1="9" x2="21" y2="9"></line>
                    <line x1="9" y1="21" x2="9" y2="9"></line>
                </svg>
                Toggle View
            </button>
        </div>
    </div>
</div>

<div class="schedule-stats">
    <div class="stat-item">
        <div class="stat-label">Total Courses</div>
        <div class="stat-value" id="stat-courses">0</div>
    </div>
    <div class="stat-item">
        <div class="stat-label">Credit Hours</div>
        <div class="stat-value" id="stat-credits">0</div>
    </div>
    <div class="stat-item">
        <div class="stat-label">Class Hours</div>
        <div class="stat-value" id="stat-hours">0</div>
    </div>
    <div class="stat-item">
        <div class="stat-label">Departments</div>
        <div class="stat-value" id="stat-departments">0</div>
    </div>
</div>

        <div class="calendar">
            <div class="time-column">
                <div class="time-marker">8 AM</div>
                <div class="time-marker">9 AM</div>
                <div class="time-marker">10 AM</div>
                <div class="time-marker">11 AM</div>
                <div class="time-marker">12 PM</div>
                <div class="time-marker">1 PM</div>
                <div class="time-marker">2 PM</div>
                <div class="time-marker">3 PM</div>
                <div class="time-marker">4 PM</div>
                <div class="time-marker">5 PM</div>
                <div class="time-marker">6 PM</div>
                <div class="time-marker">7 PM</div>
            </div>
            <div class="day" id="Monday">
                <div class="day-header">Monday</div>
                <div class="hour-grid">
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                </div>
            </div>
            <div class="day" id="Tuesday">
                <div class="day-header">Tuesday</div>
                <div class="hour-grid">
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                </div>
            </div>
            <div class="day" id="Wednesday">
                <div class="day-header">Wednesday</div>
                <div class="hour-grid">
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                </div>
            </div>
            <div class="day" id="Thursday">
                <div class="day-header">Thursday</div>
                <div class="hour-grid">
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                </div>
            </div>
            <div class="day" id="Friday">
                <div class="day-header">Friday</div>
                <div class="hour-grid">
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                    <div class="hour-line"></div>
                </div>
            </div>
        </div>

        <div id="search-popup">
            <span class="close-btn" onclick="togglePopup()">&times;</span>
            <h3>Search Courses</h3>
            <input type="text" id="popup-search" placeholder="Search by Course Code or Instructor Name and press Enter..." onkeyup="popupSearch(event)">
            <div id="popup-results"></div>
        </div>

        <div id="notification-area"></div>

        <div id="modal-overlay" class="modal-overlay">
            <div id="initial-selection-modal" class="modal">
                <h3>Select Your Major and Year</h3>
                <p id="modal-status" class="modal-status-message">Loading majors...</p>
                <select id="major-select" disabled>
                    <option>Loading...</option>
                </select>
                <select id="year-select">
                    <option>Freshman</option>
                    <option>Sophomore</option>
                    <option>Junior</option>
                    <option>Senior</option>
                </select>
                <button id="modal-confirm-button" disabled>Confirm Selection</button>
            </div>
        </div>
    </div>
    <script src="script.js" defer></script>

<div id="course-notes-modal" class="modal-overlay">
    <div class="modal">
        <h3>Course Notes</h3>
        <p id="notes-course-id"></p>
        <textarea id="course-notes-text" placeholder="Add your notes about this course here..."></textarea>
        <div class="modal-buttons">
            <button onclick="saveNotes()" class="primary-button">Save Notes</button>
            <button onclick="closeNotesModal()" class="secondary-button">Cancel</button>
        </div>
    </div>
</div>

<div id="list-view" class="list-view-container" style="display: none;">
    <h3>Course List View</h3>
    <table id="courses-table">
        <thead>
            <tr>
                <th>Course</th>
                <th>Section</th>
                <th>Days/Times</th>
                <th>Instructor</th>
                <th>Room</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="courses-table-body">
            <!-- Courses will be added here -->
        </tbody>
    </table>
</div>
</body>
</html>

